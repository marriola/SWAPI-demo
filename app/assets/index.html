<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="app.css">
  </head>
  <body>
    <div id="please-wait">
      <img src="ajax-loader-lg.gif">
    </div>

    <div id="controls" style="display: none;">
      <select id="resources" v-model="selected" @change="selectResource">
	<option v-for="resource in store" value="{{ $index }}">{{ resource.displayName }}</option>
      </select>
      <button id="btnGet" disabled>Get</button>
      <button id="btnClear">Clear link cache</button>
      <br/>
      
      <button id="btnPrev" disabled="">&lt;&lt;</button>
      <button id="btnNext" disabled="">&gt;&gt;</button>
      <img src="ajax-loader-dark.gif" id="spinner" style="display: none;">

      <!-- Column filter -->
      
      <br/>
      <div id="columnFilter">
	<a id="columnFilterExpand" href="javascript:void(0)"><div>
	    <h3 style="display: inline-block; margin: 0px;">Columns</h3>
	    <span id="expandIndicator" style="float: right;" class="closed"></span>
	</div></a>
	<div id="columns" style="display: none;">
	  <div class="columnNameHeader">
	    <a v-for="resource in resources" href="javascript:void(0)" class="columnName" @click="showColumns(resource)" data-index="{{ resource.index }}">
	      <h4>{{ resource.displayName }}</h4>
	    </a>
	  </div>

	  <div v-for="resource in resources" style="display: none" class="columnPage" data-index="{{ resource.index }}">
	    <div class="columnContainer">
	      <label v-for="column in resource.columns" v-bind:class="{ 'bold': column.hasUrl }" draggable="true">
		<input type="checkbox" name="{{ column.name }}" v-model="column.show">
		{{ column.displayName }}
	      </label>
	    </div>
	  </div>
	</div>
      </div>
    </div> 

    <div id="overlay" style="display: none"></div>

    <div id="rest"></div>

    <!-- Templates -->

    <div id="table-template" style="display: none;">
      <p>Displaying results <b>{{ pageStart }}</b> to <b>{{ pageEnd }}</b> out of <b>{{ count }}</b></p>

      <table>
	<thead>
	  <tr>
	    <th v-for="column in resource.columns" v-if="column.show" transition="fade-out" :mobile="showOnMobile(column.name) ? 'yes' : null">{{ column.displayName }}</th>
	  </tr>
	</thead>
	
	<tbody>
	  <tr v-for="result in results">
	    <td v-for="column in resource.columns" v-if="column.show" transition="fade-out" :mobile="showOnMobile(column.name) ? 'yes' : null">
	      <template v-if="isArray(result[column.name])">
		<a v-for="(index, url) in result[column.name]" href="{{ url }}" @click="clickLink(column, url, $event)" class="link" v-bind:class="{ 'not-set': !linkStore[url] }">{{ linkStore[url] }}</a>
	      </template>
	      <template v-else>
		<template v-if="column.hasUrl && result[column.name]">
		  <a href="{{ result[column.name] }}" class="link" v-bind:class="{ 'not-set': !linkStore[result[column.name]] }" @click="clickLink(column, result[column.name], $event)">{{ linkStore[result[column.name]] }}</a>
		</template>
		<template v-else>
		  {{ sanitize(result[column.name]) }}
		</template>
	      </template>
	    </td>
	  </tr>
	</tbody>
      </table>	
    </div>

    <div id="table-popup-template" style="display: none">
      <a id="btnClose" class="link" href="javascript:vueDemo.hideOverlay()">[x]</a>
      <table>
	<tbody>
	  <tr v-for="column in columns">
	    <td>{{ column.displayName }}</td>
	    
	    <td v-if="isArray(result[column.name])">
	      <a v-for="(index, url) in result[column.name]" href="{{ url }}" @click="clickLink(column, url, $event)" class="link" v-bind:class="{ 'not-set': !linkStore[url] }">{{ linkStore[url] }}</a>
	    </td>
	    
	    <td v-else>
	      <template v-if="column.hasUrl && result[column.name]">
		<a href="{{ result[column.name] }}" @click="clickLink(column, result[column.name], $event)" class="link" v-bind:class="{ 'not-set': !linkStore[result[column.name]] }">{{ linkStore[result[column.name]] }}</a>
	      </template>
	      <template v-else>{{ sanitize(result[column.name]) }}</template>
	    </td>
	  </tr>
	</tbody>
      </table>
    </div>


    <!--<script src="https://code.jquery.com/jquery-2.2.3.js"></script>-->
    <!--<script src="http://cdn.jsdelivr.net/vue/1.0.16/vue.js"></script>-->
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/vue/1.0.21/vue.min.js"></script>
    <script src="app.js" type="text/javascript"></script>

    <script type="text/javascript">
      var $VueDemo = require("sw-demo.js");
    </script>
  </body>
</html>
