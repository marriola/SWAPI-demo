!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},n={},o={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],o=(i.test(t)?e+"/"+t:t).split("/"),a=0,l=o.length;l>a;a++)r=o[a],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},l=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(r){var n=a(l(t),r);return e.require(n,t)}},s=function(e,t){var n=null;n=b&&b.createHot(e);var o={id:e,exports:{},hot:n};return r[e]=o,t(o.exports,u(e),o),o.exports},c=function(e){return n[e]?c(n[e]):e},f=function(e,t){return c(a(l(e),t))},p=function(e,n){null==n&&(n="/");var i=c(e);if(o.call(r,i))return r[i].exports;if(o.call(t,i))return s(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};p.alias=function(e,t){n[t]=e};var d=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/,h=function(e){if(d.test(e)){var t=e.replace(d,"");o.call(n,t)&&n[t].replace(d,"")!==t+"/index"||(n[t]=e)}if(v.test(e)){var r=e.replace(v,"");o.call(n,r)||(n[r]=e)}};p.register=p.define=function(e,n){if("object"==typeof e)for(var i in e)o.call(e,i)&&p.register(i,e[i]);else t[e]=n,delete r[e],h(e)},p.list=function(){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};var b=e._hmr&&new e._hmr(f,p,t,r);p._cache=r,p.hmr=b&&b.wrap,p.brunch=!0,e.require=p}}(),function(){window;require.register("ajax.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e.Ajax=function(){function e(t){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1];n(this,e),this.lastUrl=null,null===t||t.endsWith("/")||(t+="/"),this.base=t,this.errorCallback=r||this.ajaxError}return o(e,[{key:"call",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this,n=arguments.length<=2||void 0===arguments[2]?"GET":arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return this.lastUrl=this.base+e,new Promise(function(i,a){$.ajax({type:n,url:t||!r.base?e:r.base+e,success:i,error:function(e,t,n){var i=[o,r.errorCallback,r.ajaxError],l=!0,u=!1,s=void 0;try{for(var c,f=i[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;if(p&&!p.bind(r)(e,t,n))break}}catch(d){u=!0,s=d}finally{try{!l&&f["return"]&&f["return"]()}finally{if(u)throw s}}a(e,t,n)}})})}},{key:"ajaxError",value:function(e,t,r){alert("Ajax error retrieving "+this.lastUrl+". See window._ajaxError for more detail"),window._ajaxError={jqXHR:e,status:t,error:r}}}]),e}()}),require.register("controllers/columns.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnsController=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=t("controllers/controller.js"),u=t("local-storage.js"),s=(t("ajax.js"),t("utils.js"));e.ColumnsController=function(e){function t(e){n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.retrievedResources=0,r.dragging=null,r.columnOrder=[],r.setupEventHandlers(),r}return i(t,e),a(t,[{key:"setupEventHandlers",value:function(){$("#columnFilterExpand").on("click",function(e){var t=$("#expandIndicator").hasClass("open");t?($("#expandIndicator").removeClass("open").addClass("closed"),$("#columns").toggle(500)):($("#expandIndicator").removeClass("closed").addClass("open"),$("#columns").toggle(500))})}},{key:"load",value:function(e,t){var r=this,n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;this.ajax.call(c.name+"/schema").then(function(t){return function(n){t.columns=Object.keys(n.properties).map(function(e,t){var r=(0,s.mapName)(e);return r.show=!0,r.hasUrl=n.properties[e].description.toLowerCase().contains("url"),r});var o=t.columns.map(function(e){return e.name}),i=u.LocalStorage.load("order."+t.name);i?(t.columns=(0,s.reorder)(t.columns,o,i),r.columnOrder=i):r.columnOrder=o,++r.retrievedResources==e.length&&(r.viewmodel=new Vue({el:"#columns",data:{resources:e},methods:{showColumns:r.showColumns}}),$("#please-wait").fadeOut(250,function(){this.setupDragAndDropEvents(),$("#controls").slideDown(250)}.bind(r)),$("#btnGet").prop("disabled",!1))}}(c))}}catch(f){o=!0,i=f}finally{try{!n&&l["return"]&&l["return"]()}finally{if(o)throw i}}t&&t()}},{key:"showColumns",value:function(e){$(".columnName").removeClass("selected"),$(".columnName[data-index='"+e.index+"']").addClass("selected"),0==$(".columnPage:visible").length?$(".columnPage[data-index='"+e.index+"']").slideDown(250):$(".columnPage:visible").fadeOut(250,function(){$(".columnPage[data-index='"+e.index+"']").fadeIn(250)})}},{key:"setupDragAndDropEvents",value:function(){var e=this;$(".columnContainer label").on("dragstart",function(t){e.columnOrder=e.getColumnOrder(),e.dragging=t.originalEvent.target,e.dragging.classList.add("dragging"),t.originalEvent.dataTransfer.setDragImage(document.createElement("img"),0,0)}),$(".columnContainer").on("dragover",function(t){for(var r=t.originalEvent.target,n=r.parentElement;n&&"LABEL"===!r.tagName;)r=n,n=r.parentElement;if(n.classList.contains("columnContainer")){t.preventDefault();var o=r.clientHeight/2,i=t.offsetY<o;n.insertBefore(e.dragging,i?r:r.nextSibling)}}),$(".columnContainer label").on("drop",function(e){}),$(".columnContainer label").on("dragend",function(t){e.dragging.classList.remove("dragging"),e.dragging=null;var r=e.getSelectedResource(),n=e.columnOrder;e.columnOrder=e.getColumnOrder(),r.columns=(0,s.reorder)(r.columns,n,e.columnOrder),u.LocalStorage.save("order."+r.name,e.columnOrder)})}},{key:"getColumnOrder",value:function(){var e=this.getSelectedPage();return Array.from(e.find("input")).map(function(e,t){return e.getAttribute("name")})}},{key:"getPageNumber",value:function(){return parseInt($("#columnFilter .columnName.selected").attr("data-index"))}},{key:"getSelectedPage",value:function(){var e=this.getPageNumber();return $("#columnFilter .columnPage[data-index='"+e+"']")}},{key:"getSelectedResource",value:function(){var e=this.getPageNumber();return $VueDemo["default"].resources.model.store[e]}}]),t}(l.Controller)}),require.register("controllers/controller.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var o=t("ajax.js");e.Controller=function i(e){n(this,i),this.SWAPI_BASE=e,this.ajax=new o.Ajax(this.SWAPI_BASE)}}),require.register("controllers/resources.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ResourcesController=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=t("controllers/controller.js"),u=t("utils.js");t("ajax.js"),e.ResourcesController=function(e){function t(e){n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.model={selected:"0"},r}return i(t,e),a(t,[{key:"load",value:function(e){var t=this;this.ajax.call("").then(function(r){t.model.store=Object.keys(r).map(function(e,t){var r=(0,u.mapName)(e,t);return r.columns=[],r.selected=!1,r}),t.viewModel=new Vue({el:"#resources",data:t.model,methods:{selectResource:t.selectResource}}),e&&e()})}},{key:"getSelected",value:function(){return this.model.store[this.model.selected]}},{key:"selectResource",value:function(e){$("#table").remove(),$("#btnPrev, #btnNext").prop("disabled",!0),$VueDemo["default"].table.page=1}}]),t}(l.Controller)}),require.register("controllers/table-base.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TableBaseController=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=t("controllers/controller.js");e.TableBaseController=function(e){function t(e,r,i,a){n(this,t);var l=o(this,Object.getPrototypeOf(t).call(this,e));return l.resources=r,l.linkStore=i,l.linkResolver=a,l.baseMethods={clickLink:l.clickLink,isArray:l.isArray,sanitize:l.sanitize},l}return i(t,e),a(t,[{key:"clickLink",value:function(e,t,r){r.preventDefault(),r.target.classList.add("waiting"),$VueDemo["default"].tablePopup.load(t,function(){r.target.classList.remove("waiting")})}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"sanitize",value:function(e){return e||"[none]"}}]),t}(l.Controller)}),require.register("controllers/table-popup.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TablePopupController=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=t("controllers/table-base.js"),u=t("utils.js");e.TablePopupController=function(e){function t(e,r,i,a){n(this,t);var l=o(this,Object.getPrototypeOf(t).call(this,e,r,i,a));return l.setupEventHandlers(),l}return i(t,e),a(t,[{key:"setupEventHandlers",value:function(){var e=this;$("#overlay, #btnClose").on("click",this.hideOverlay),$(document).on("keyup",function(t){27==(t.which||t.keyCode)&&e.hideOverlay()})}},{key:"showOverlay",value:function(){$("#table-popup, #overlay").fadeIn(),$("body").css("overflow","hidden")}},{key:"hideOverlay",value:function(){$("#table-popup, #overlay").fadeOut(),$("body").css("overflow","auto")}},{key:"load",value:function(e,t){var r=this,n=void 0,o=e.match(/http:\/\/swapi.co\/api\/(\w+).*/);if(o){n=o[1];var i=this.resources.model.store.find(function(e){return e.name==n});if(i){var a=i.columns;this.ajax.call(e,!0).then(function(e){$("#rest").append((0,u.clone)($("#table-popup-template"),!0)),r.viewmodel=new Vue({el:"#table-popup",data:{columns:a,result:e,linkStore:r.linkStore.store},methods:r.baseMethods}),r.linkResolver.resolve("#table-popup"),r.showOverlay(),t&&t()})}}}}]),t}(l.TableBaseController)}),require.register("controllers/table.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TableController=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=t("controllers/table-base.js"),u=t("utils.js");t("ajax.js"),e.TableController=function(e){function t(e,r,i,a){n(this,t);var l=o(this,Object.getPrototypeOf(t).call(this,e,r,i,a));return l.page=1,l.setupEventHandlers(),l}return i(t,e),a(t,[{key:"setupEventHandlers",value:function(){var e=this;$("#btnPrev").on("click",function(t){e.load(--e.page)}),$("#btnGet").on("click",function(t){e.load(e.page)}),$("#btnNext").on("click",function(t){e.load(++e.page)})}},{key:"load",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=(arguments[1],this.resources.getSelected());this.SWAPI_BASE+r.name+"/?page="+t;$("#spinner").show(),this.ajax.call(r.name+"/?page="+t).then(function(t){(0,u.clone)($("#table-template"),!0).first().attr("id","table").appendTo($("#rest")),e.viewmodel=new Vue({el:"#table",data:{pageStart:10*(e.page-1)+1,pageEnd:10*(e.page-1)+t.results.length,count:t.count,resource:r,results:t.results,linkStore:e.linkStore.store},methods:$.extend({},e.baseMethods,{showOnMobile:e.showOnMobile})}),$("#btnPrev").prop("disabled",!t.previous),$("#btnNext").prop("disabled",!t.next),$("#spinner").hide(),$("html, body").animate({scrollTop:0}),$("#table").show(),e.linkResolver.resolve("#table")})}},{key:"showOnMobile",value:function(e){return"url"==e}}]),t}(l.TableBaseController)}),require.register("initialize.js",function(e,t,r){"use strict";document.addEventListener("DOMContentLoaded",function(){console.log("Initialized app")})}),require.register("link-resolver.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LinkResolver=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=t("ajax.js");e.LinkResolver=function(){function e(t){n(this,e),this.linkStore=t,this.waiting={},this.ajax=new i.Ajax(null)}return o(e,[{key:"resolve",value:function(){var e=this;arguments.length<=0||void 0===arguments[0]?null:arguments[0];if($VueDemo["default"].RESOLVE_LINKS){var t=$(".not-set"),r=t.length;console.log("Resolving "+r+" links..."),t.each(function(t,n){var o=n.getAttribute("href");return e.waiting[o]?void--r:e.linkStore.get(o)?($("[href='"+o+"']").text(e.linkStore.get(o)).removeClass("not-set"),void--r):(e.waiting[o]=!0,void e.ajax.call(o).then(function(t){var n=t.name||t.title,i=$("[href='"+o+"']");console.log("resolving "+i.length+" links with "+o+" -> "+n),i.text(n).removeClass("not-set"),e.linkStore.add(o,n),e.waiting[o]=!1,0==--r&&(e.linkStore.save(),console.log("Done."))}))})}}}]),e}()}),require.register("link-store.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LinkStore=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=t("local-storage.js");e.LinkStore=function(){function e(){n(this,e),this.store=this.load()}return o(e,[{key:"add",value:function(e,t){this.store[e]=t}},{key:"get",value:function(e){return this.store[e]||""}},{key:"load",value:function(){return i.LocalStorage.load("linkStore")}},{key:"save",value:function(){i.LocalStorage.save("linkStore",this.store)}},{key:"clear",value:function(){this.store={},this.save()}}]),e}()}),require.register("local-storage.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e.LocalStorage=function(){function e(){n(this,e)}return o(e,null,[{key:"load",value:function(e){var t=void 0;if(localStorage)t=localStorage[e];else{var r=document.cookie.match(e+"=(.*?);");t=r&&r[1]||null}return t&&JSON.parse(t)||null}},{key:"save",value:function(e,t){var r=JSON.stringify(t);localStorage?localStorage[e]=r:document.cookie=e+"="+r+";"}}]),e}()}),require.register("sw-demo.js",function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=t("link-store.js"),i=t("link-resolver.js"),a=t("controllers/resources.js"),l=t("controllers/columns.js"),u=t("controllers/table.js"),s=t("controllers/table-popup.js"),c=function f(){var e=this;n(this,f),this.RESOLVE_LINKS=!0,this.SWAPI_BASE="http://swapi.co/api/",this.linkStore=new o.LinkStore,this.linkResolver=new i.LinkResolver(this.linkStore),this.resources=new a.ResourcesController(this.SWAPI_BASE),this.columns=new l.ColumnsController(this.SWAPI_BASE),this.table=new u.TableController(this.SWAPI_BASE,this.resources,this.linkStore,this.linkResolver),this.tablePopup=new s.TablePopupController(this.SWAPI_BASE,this.resources,this.linkStore,this.linkResolver),$("#btnClear").on("click",function(t){e.linkStore.clear(),alert("Done!")}),this.resources.load(function(){e.columns.load(e.resources.model.store)})};e["default"]=new c}),require.register("utils.js",function(e,t,r){"use strict";function n(e){return e.split("_").map(function(e,t){return e[0].toUpperCase()+e.substr(1)}).join(" ")}function o(e,t){return{name:e,displayName:n(e),index:t}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=e.attr("id").replace("-template","");return t&&$("#"+r).remove(),e.clone().first().attr("id",r)}function a(e,t,r){var n=[],o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;n.push(t.indexOf(s))}}catch(c){i=!0,a=c}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw a}}var f=[],p=!0,d=!1,v=void 0;try{for(var h,b=n[Symbol.iterator]();!(p=(h=b.next()).done);p=!0){var y=h.value;f.push(e[y])}}catch(c){d=!0,v=c}finally{try{!p&&b["return"]&&b["return"]()}finally{if(d)throw v}}return f}Object.defineProperty(e,"__esModule",{value:!0}),e.titleCase=n,e.mapName=o,e.clone=i,e.reorder=a,Array.from=Array.from||function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this[this.length-1]===e},String.prototype.contains=String.prototype.contains||function(e){return-1!=this.indexOf(e)}}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");